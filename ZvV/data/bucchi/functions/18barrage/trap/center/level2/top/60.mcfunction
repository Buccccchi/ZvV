scoreboard players add $trap obj 1
execute if score $trap obj matches 1 run scoreboard players set $time obj 40
execute if score $trap obj matches 1 run loot replace block 0 16 0 container.0 loot bucchi:random/2
execute if score $trap obj matches 1 if block 0 16 0 minecraft:furnace{Items: [{Count: 1b}]} run tag @e[tag=main] add curveA
#移動開始
execute if entity @e[tag=main,tag=curveA] run tag @e[tag=center2_4,tag=block,tag=!scale5] add curveA
execute unless entity @e[tag=main,tag=curveA] run tag @e[tag=center2_4,tag=block,tag=!scale5] add curveB
tag @e[tag=center2_4,tag=tear,tag=!straight0.2] add position0_0.76
tag @e[tag=center2_4,tag=tear,tag=!straight0.2] add straight0.2
tag @e[tag=!main,tag=center2_4,tag=block,tag=!scale5] add position0_0
tag @e[tag=!main,tag=center2_4,tag=block,tag=!scale5] add scale5
execute as @a positioned as @s run playsound minecraft:entity.player.levelup master @s ~ ~ ~ 0.2 2
#次の弾幕準備
execute if entity @e[tag=main,tag=curveA] as @e[tag=main] positioned as @s positioned 0 80 -200 facing entity @s feet positioned as @s positioned ^ ^ ^-30 positioned 0 ~ -200 facing entity @s feet positioned as @s positioned ^ ^ ^-30 positioned 0 ~ -200 facing entity @s feet positioned as @s positioned ^ ^ ^-30 positioned 0 ~ -200 facing entity @s feet positioned as @s positioned ^ ^ ^-30 positioned 0 ~ -200 facing entity @s feet positioned as @s positioned ^ ^ ^-30 positioned 0 ~ -200 facing entity @s feet positioned as @s positioned ^ ^ ^-30 positioned 0 ~ -200 facing entity @s feet positioned as @s positioned ^ ^ ^-30 positioned 0 ~ -200 facing entity @s feet positioned as @s positioned ^ ^ ^-30 positioned 0 ~ -200 facing entity @s feet positioned as @s positioned ^ ^ ^-30 positioned 0 ~ -200 facing entity @s feet positioned as @s positioned ^ ^ ^-30 rotated ~54 ~ positioned ^ ^ ^30 run summon minecraft:armor_stand ~ 60 ~ {Tags: ["center2_4", "tear"], ArmorItems: [{}, {}, {}, {id: "minecraft:ghast_tear", Count: 1b}], Invisible: 1b, Marker: 1b, NoBasePlate: 1b, Fire: 32767s, Pose: {Head: [90.0f, 0.0f, 0.0f]}}
execute if entity @e[tag=main,tag=curveB] as @e[tag=main] positioned as @s positioned 0 80 -200 facing entity @s feet positioned as @s positioned ^ ^ ^-30 positioned 0 ~ -200 facing entity @s feet positioned as @s positioned ^ ^ ^-30 positioned 0 ~ -200 facing entity @s feet positioned as @s positioned ^ ^ ^-30 positioned 0 ~ -200 facing entity @s feet positioned as @s positioned ^ ^ ^-30 positioned 0 ~ -200 facing entity @s feet positioned as @s positioned ^ ^ ^-30 positioned 0 ~ -200 facing entity @s feet positioned as @s positioned ^ ^ ^-30 positioned 0 ~ -200 facing entity @s feet positioned as @s positioned ^ ^ ^-30 positioned 0 ~ -200 facing entity @s feet positioned as @s positioned ^ ^ ^-30 positioned 0 ~ -200 facing entity @s feet positioned as @s positioned ^ ^ ^-30 positioned 0 ~ -200 facing entity @s feet positioned as @s positioned ^ ^ ^-30 rotated ~-54 ~ positioned ^ ^ ^30 run summon minecraft:armor_stand ~ 60 ~ {Tags: ["center2_4", "tear"], ArmorItems: [{}, {}, {}, {id: "minecraft:ghast_tear", Count: 1b}], Invisible: 1b, Marker: 1b, NoBasePlate: 1b, Fire: 32767s, Pose: {Head: [90.0f, 0.0f, 0.0f]}}
execute if score $trap obj matches 1 positioned as @e[tag=!barrage,tag=center2_4,tag=tear] run summon minecraft:armor_stand ~ ~ ~ {Tags: ["center2_4", "block"], ArmorItems: [{}, {}, {}, {id: "minecraft:tube_coral_block", Count: 1b}], Invisible: 1b, Marker: 1b, NoBasePlate: 1b, Fire: 32767s, Pose: {Head: [180.0f, 0.0f, 0.0f], LeftLeg: [180.0f, 0.0f, 0.0f], RightLeg: [180.0f, 0.0f, 0.0f]}}
execute as @e[tag=!barrage,tag=center2_4,tag=tear] positioned as @s facing 0 60 -200 run teleport @s ~ 62 ~ ~180 0
execute as @e[tag=!barrage,tag=center2_4,tag=block] positioned as @s positioned ~ ~30 ~ facing 0 60 -200 run teleport @s ~ 62 ~ ~ ~
tag @e[tag=!barrage,tag=center2_4] add barrage